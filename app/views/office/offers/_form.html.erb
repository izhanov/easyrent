<%= form_with model: [:office, owner, car, offer], html: {class: "row mb-4", data: {}} do |f| %>
  <%= f.hidden_field :car_id, value: car.id %>

  <div class="row-lg row mb-3">
    <div class="col-lg col-sm-12">
      <div class="form-check form-switch">
        <%= f.label :published, class: "form-check-label" %>
        <%= f.check_box :published, class: "form-check-input" %>
      </div>

      <div class="input-group">
        <%= f.label :title, class: "input-group-text" %>
        <%= f.text_field :title, class: "form-control" %>
        <%= error_field(@errors, :title) %>
      </div>
    </div>
  </div>

  <div class="row-lg row mb-3">
    <%= f.label :prices, class: "form-label" %>
    <% owner.price_range.price_range_cells.order(id: :asc).each do |price_range_cell| %>
      <div class="col-lg col-sm-12">
        <div class="input-group">
          <%= f.fields_for :prices do |pf| %>
            <%= pf.label "#{price_range_cell.from} – #{price_range_cell.to}", for: "offer_prices_#{price_range_cell.range}", class: "input-group-text" %>
            <%= pf.text_field price_range_cell.range, class: "form-control", value: f.object.prices[price_range_cell.range.to_s], data: {mask: "price"} %>
          <% end %>
        </div>
      </div>
    <% end %>
    <%= error_field(@errors, :offer, :prices) %>
  </div>

  <div class="row-lg row mb-3">
    <div class="col-lg col-sm-12">
      <%= f.label :mileage_limit_id, class: "form-label" %>
      <%= f.select :mileage_limit_id, owner.mileage_limits.order(id: :asc).map { |mileage_limit| ["#{mileage_limit.title} – #{mileage_limit.value} км", mileage_limit.id] }, {include_blank: false}, class: "form-select" %>
    </div>
  </div>

  <div class="row-lg row mb-3">
    <div class="col-12">
      <%= f.submit t(".submit"), class: "btn btn-success" %>
      <%= link_to t(".cancel"), office_car_park_car_path(@car_park, @car), class: "btn btn-outline-secondary", data: {turbo_frame: "_top"} %>
    </div>
  </div>
<% end %>
